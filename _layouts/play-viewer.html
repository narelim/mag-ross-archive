<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title }}</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@300;400;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* --- ê¸°ë³¸ ì„¤ì • --- */
        body {
            background-color: #f2f3f5; /* ì•± ë°°ê²½ìƒ‰ */
            margin: 0;
            padding-top: 130px; /* í—¤ë” ë†’ì´ë§Œí¼ ë„ìš°ê¸° */
            font-family: 'Noto Sans KR', sans-serif;
            color: #333;
        }

        /* 1. ğŸ”µ ìµœìƒë‹¨ íŒŒë€ í—¤ë” (DLsite Play ëŠë‚Œ) */
        .app-header {
            background-color: #4086F4;
            color: white;
            height: 50px;
            display: flex;
            align-items: center;
            padding: 0 15px;
            position: fixed;
            top: 0; left: 0; right: 0;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .back-btn {
            background: none; border: none; color: white;
            font-size: 1.2rem; cursor: pointer; padding: 5px 10px 5px 0;
        }
        .app-title { font-weight: bold; flex: 1; font-size: 1rem; }
        .app-icons i { margin-left: 15px; cursor: pointer; }


        /* 2. â„¹ï¸ ì‘í’ˆ ì •ë³´ í—¤ë” (ì¸ë„¤ì¼ + ì œëª©) */
        .info-header {
            background: white;
            padding: 15px;
            display: flex;
            gap: 15px;
            position: fixed;
            top: 50px; left: 0; right: 0; /* íŒŒë€ í—¤ë” ë°”ë¡œ ì•„ë˜ */
            z-index: 900;
            border-bottom: 1px solid #ddd;
            height: 80px; box-sizing: border-box;
        }
        .info-thumb {
            width: 50px; height: 50px;
            border-radius: 4px; overflow: hidden;
            border: 1px solid #eee; flex-shrink: 0;
        }
        .info-thumb img { width: 100%; height: 100%; object-fit: cover; }
        .info-text { flex: 1; display: flex; flex-direction: column; justify-content: center; }
        .info-title { font-size: 0.95rem; font-weight: bold; margin-bottom: 4px; display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical; overflow: hidden;}
        .info-tags { font-size: 0.75rem; color: #888; }
        .info-tags span { background: #f0f0f0; padding: 2px 5px; border-radius: 3px; margin-right: 4px; }
        .open-app-btn {
            background: #4086F4; color: white; border: none;
            padding: 5px 10px; border-radius: 4px; font-weight: bold; font-size: 0.8rem;
            align-self: center; cursor: default;
        }


        /* 3. ğŸ“‚ í´ë” íƒ­ (ê³„ì¸µ êµ¬ì¡° ëŠë‚Œ) */
        .folder-tab-bar {
            max-width: 800px; margin: 20px auto 0 auto;
            padding: 0 20px;
            display: flex;
        }
        .folder-tab {
            background: #eaf3ff; /* ì—°í•œ íŒŒë‘ */
            color: #4086F4;
            padding: 8px 20px;
            border-radius: 10px 10px 0 0; /* ìœ„ìª½ë§Œ ë‘¥ê¸€ê²Œ */
            font-weight: bold;
            font-size: 0.9rem;
            display: flex; align-items: center; gap: 8px;
            position: relative;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.05);
        }
        /* íƒ­ ì•„ë˜ í•˜ì–€ ì„  ê°€ë¦¬ê¸°ìš© */
        .folder-tab::after {
            content: ''; position: absolute; bottom: -2px; left: 0; right: 0;
            height: 4px; background: white;
        }


        /* 4. ğŸ“„ í…ìŠ¤íŠ¸ ë·°ì–´ (ì¢…ì´) */
        .viewer-paper {
            max-width: 800px;
            margin: 0 auto 50px auto; /* íƒ­ ë°”ë¡œ ì•„ë˜ */
            background: #fff;
            padding: 40px 30px;
            min-height: 80vh;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            /* ëª¨ì„œë¦¬ ë‘¥ê¸€ê²Œ (íƒ­ ì—°ê²°ë¶€ ì œì™¸) */
            border-radius: 0 4px 4px 4px; 
            font-family: 'Noto Serif KR', serif; /* ë³¸ë¬¸ì€ ëª…ì¡°ì²´ */
            line-height: 1.8;
            font-size: 1.05rem;
        }

/* --- ğŸ“ ì²¨ë¶€íŒŒì¼ ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ (ì—…ê·¸ë ˆì´ë“œ) --- */
.attach-box { 
    margin-top: 50px; 
    padding-top: 20px; 
    border-top: 2px dashed #eee; 
}
.attach-title { 
    font-size: 0.95rem; 
    font-weight: bold; 
    color: #555; 
    margin-bottom: 15px; 
    font-family: sans-serif; 
}

/* ë²„íŠ¼ ë””ìì¸ */
.file-btn {
    display: flex; 
    align-items: center; 
    gap: 15px; /* ì¸ë„¤ì¼ê³¼ ê¸€ì ì‚¬ì´ ê°„ê²© */
    background: #fff; 
    border: 1px solid #eee;
    padding: 10px; 
    margin-bottom: 10px; 
    border-radius: 8px; /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
    cursor: pointer; 
    text-align: left; 
    font-family: sans-serif; 
    color: #444;
    transition: all 0.2s;
    width: 100%; /* ë²„íŠ¼ ê½‰ ì±„ìš°ê¸° */
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}
.file-btn:hover { 
    background: #f0f8ff; 
    border-color: #4086F4; 
    transform: translateY(-2px); /* ì‚´ì§ ë– ì˜¤ë¥´ëŠ” íš¨ê³¼ */
}

/* ğŸ–¼ï¸ ì¸ë„¤ì¼ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
.file-thumb-img {
    width: 60px;          /* ê°€ë¡œ í¬ê¸° */
    height: 60px;         /* ì„¸ë¡œ í¬ê¸° */
    border-radius: 6px;   /* ì¸ë„¤ì¼ë„ ë‘¥ê¸€ê²Œ */
    object-fit: cover;    /* ì´ë¯¸ì§€ê°€ ì°Œê·¸ëŸ¬ì§€ì§€ ì•Šê³  ê½‰ ì°¨ê²Œ */
    border: 1px solid #ddd;
    background-color: #eee;
}

/* íŒŒì¼ëª… í…ìŠ¤íŠ¸ */
.file-info {
    display: flex;
    flex-direction: column;
    justify-content: center;
}
.file-name {
    font-size: 0.95rem;
    font-weight: bold;
    color: #333;
    margin-bottom: 3px;
}
.file-sub {
    font-size: 0.75rem;
    color: #888;
}


        /* ì´ë¯¸ì§€ ëª¨ë‹¬ */
        #img-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 2000; align-items: center; justify-content: center; cursor: zoom-out; }
        #modal-img { max-width: 95%; max-height: 95%; border-radius: 4px; }

        /* ëª¨ë°”ì¼ ëŒ€ì‘ */
        @media (max-width: 600px) {
            .viewer-paper { padding: 30px 20px; }
            .info-header { padding: 10px; }
        }

        /* --- ì•„ì½”ë””ì–¸(ì ‘ì´ì‹) ìŠ¤íƒ€ì¼ --- */
details {
    background: #fff;
    border: 1px solid #eee;
    border-radius: 8px;
    margin-bottom: 15px; /* ë°•ìŠ¤ ê°„ê²© */
    overflow: hidden;
    transition: all 0.3s;
}

/* ì œëª© ë¶€ë¶„ (í´ë¦­í•˜ëŠ” ê³³) */
summary {
    background: #fafafa;
    padding: 15px 20px;
    font-weight: bold;
    font-family: 'Noto Sans KR', sans-serif; /* ì œëª©ì€ ê³ ë”•ì´ ì–´ìš¸ë¦¼ */
    font-size: 0.95rem;
    color: #444;
    cursor: pointer;
    list-style: none; /* ê¸°ë³¸ í™”ì‚´í‘œ ì œê±° */
    display: flex;
    justify-content: space-between;
    align-items: center;
}
/* í¬ë¡¬ ë“±ì—ì„œ ê¸°ë³¸ í™”ì‚´í‘œ ìˆ¨ê¸°ê¸° */
summary::-webkit-details-marker { display: none; }

/* ë§ˆìš°ìŠ¤ ì˜¬ë ¸ì„ ë•Œ */
summary:hover { background: #f0f8ff; color: #4086F4; }

/* ì œëª© ì˜†ì— í™”ì‚´í‘œ ì•„ì´ì½˜ ë§Œë“¤ê¸° */
summary::after {
    content: '\f078'; /* FontAwesome ì•„ë˜ í™”ì‚´í‘œ */
    font-family: "Font Awesome 5 Free"; 
    font-weight: 900;
    transition: transform 0.3s;
    font-size: 0.8rem;
    color: #bbb;
}

/* í¼ì³ì¡Œì„ ë•Œ ìŠ¤íƒ€ì¼ */
details[open] {
    border-color: #4086F4; /* í…Œë‘ë¦¬ íŒŒë€ìƒ‰ìœ¼ë¡œ ê°•ì¡° */
    box-shadow: 0 4px 10px rgba(64, 134, 244, 0.1);
}
details[open] summary {
    border-bottom: 1px solid #eee;
    color: #4086F4;
}
details[open] summary::after {
    transform: rotate(180deg); /* í™”ì‚´í‘œ ë’¤ì§‘ê¸° */
    color: #4086F4;
}

/* _layouts/play-viewer.html ì˜ <style> ì•ˆìª½ */

details .details-content {
    padding: 20px;
    line-height: 1.8;
    color: #333;
    background: #fff;
    white-space: pre-wrap; 
    word-break: break-all; /* ê¸´ ì˜ì–´ ë‹¨ì–´ë„ ì˜ë¼ì„œ ì¤„ë°”ê¿ˆ */
}


    </style>
</head>
<body>

    <header class="app-header">
        <button class="back-btn" onclick="history.back()">
            <i class="fas fa-arrow-left"></i>
        </button>
        <div class="app-title">Backstage play</div>
        <div class="app-icons">
            <i class="fas fa-heart"></i>
            <i class="fas fa-download"></i>
        </div>
    </header>

    <div class="info-header">
        <div class="info-thumb">
            {% if page.image %}
                <img src="{{ page.image | relative_url }}">
            {% else %}
                <img src="https://via.placeholder.com/50x50?text=No+Img">
            {% endif %}
        </div>
        <div class="info-text">
            <div class="info-title">{{ page.title }}</div>
            <div class="info-tags">
                {% for tag in page.tags limit:3 %}
                    <span>{{ tag }}</span>
                {% endfor %}
            </div>
        </div>
        <button class="open-app-btn">ì•±ì—ì„œ ì—´ê¸°</button>
    </div>


    <div class="folder-tab-bar">
        <div class="folder-tab">
            <i class="fas fa-folder-open"></i>
            {{ page.tags | first | default: "Library" }}
        </div>
    </div>


    <div class="viewer-paper">
        {{ content }}

{% if page.attachments %}
<div class="attach-box">
    <div class="attach-title">
        <i class="fas fa-paperclip"></i> ì²¨ë¶€ íŒŒì¼ ({{ page.attachments | size }}ê°œ)
    </div>
    
    {% for img in page.attachments %}
    
    {% assign filename = img | split: '/' | last %}

    <button class="file-btn" onclick="openModal('{{ img | relative_url }}')">
        
        <img src="{{ img | relative_url }}" class="file-thumb-img" alt="thumb">
        
        <div class="file-info">
            <span class="file-name">{{ filename }}</span>
            <span class="file-sub">ì´ë¯¸ì§€ í¬ê²Œ ë³´ê¸° (Click to view)</span>
        </div>
    </button>
    {% endfor %}
</div>
{% endif %}

    </div>


    <div id="img-modal" onclick="this.style.display='none'">
        <img id="modal-img" src="">
    </div>

    <script>
        function openModal(src) {
            document.getElementById('modal-img').src = src;
            document.getElementById('img-modal').style.display = 'flex';
        }
    </script>

</body>
</html>
