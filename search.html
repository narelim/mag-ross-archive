---
layout: default
title: Archive
---

<div class="hero universe">
    <div class="title-layered-container">
        <span class="small-text">our infinity</span>
        <h1 class="large-text",stlyy="fomt-family":'Monsieur La Doulaise';>Universe</h1>
    </div>
</div>

<div class="archive-container">

    <div class="mobile-search-wrapper">
        <input type="text" id="mobile-search-input" class="search-input" placeholder="Search..." onkeyup="filterItems(this.value, 'all')">
    </div>

    /*<div class="archive-top-section">
        
        <div class="sidebar">
            <div class="pc-search-wrapper">
                <input type="text" id="search-input" class="search-input" placeholder="Search..." onkeyup="filterItems(this.value, 'all')">
            </div>

            <div class="filter-group">
                </div>
        </div>

        <div class="filter-panel">
            </div>

    </div>*/
    
    </div>

    
    <div class="archive-top-section">
        
        <aside class="sidebar">
            <div class="sidebar-section">
                <input type="text" id="search-input" placeholder="Search..." 
                style="width: 100%; box-sizing: border-box; padding: 10px 0; border: none; border-bottom: 2px solid #111; background: transparent; font-family: 'Pretendard-Light'; outline: none; border-radius: 0; font-size: 1rem;">
            </div>

            <div class="sidebar-section">
                <div class="filter-group">
                    <span class="filter-link active" onclick="switchMode('all', this)">ALL</span>
                    <span class="filter-link" onclick="switchMode('category', this)">CATEGORY</span>
                    <span class="filter-link" onclick="switchMode('tag', this)">TAGS</span>
                </div>
            </div>
        </aside>

        <div class="filter-panel">
            <div id="submenu-all" class="submenu-box" style="display: block;">
                <h2 style="font-family: 'playfair-display-sc-regular'; margin-top:0; font-size:1rem;">ALL ARCHIVES</h2>
                <span class="submenu-desc">Explore the entire history of Maguire & Ross.</span>
            </div>

            <div id="submenu-category" class="submenu-box" style="display: none;">
                <h2 style="font-family: 'playfair-display-sc-regular'; margin-top:0; font-size:1rem;">CATEGORY</h2>
                <div class="chip-container" style="margin-top:10px;">
                    <button id="btn-cat-all" class="filter-chip" onclick="filterList('all', this)">View All</button>
                    
                    {% assign sorted_categories = site.categories %}
                    {% for category in sorted_categories %}
                        {% assign cat_name = category[0] %}
                        {% assign show_cat = false %}
                        {% for post in category[1] %}
                            {% unless post.type == 'Secret' %}{% assign show_cat = true %}{% endunless %}
                        {% endfor %}
                        {% if show_cat %}
                        <button class="filter-chip" onclick="filterList('{{ cat_name }}', this)">{{ cat_name }}</button>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>

            <div id="submenu-tag" class="submenu-box" style="display: none;">
                <h2 style="font-family: 'playfair-display-sc-regular'; margin-top:0; font-size:1rem;">TAGS</h2>
                <div class="chip-container" style="margin-top:10px;">
                    {% assign sorted_tags = site.tags %}
                    {% for tag in sorted_tags %}
                        {% assign tag_name = tag[0] %}
                        {% assign show_tag = false %}
                        {% for post in tag[1] %}
                            {% unless post.type == 'Secret' %}{% assign show_tag = true %}{% endunless %}
                        {% endfor %}
                        {% if show_tag %}
                        <button class="filter-chip" onclick="filterSearch('{{ tag_name }}', this)">#{{ tag_name }}</button>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div> 
    
    <div class="archive-bottom-section">
        
        <div class="view-options-bar">
            <span id="current-status" style="color:#888; font-family: 'Pretendard-Light'; font-size:0.9rem;">Showing All</span>
            <div>
                <button onclick="changeView('grid')" id="btn-grid">â–¦</button>
                <button onclick="changeView('list')" id="btn-list" class="active">â‰¡</button>
            </div>
        </div>

        <ul id="post-list" class="post-list view-list">
            {% for post in site.posts %}
            {% assign p_type = post.type | downcase %}
            {% unless p_type == 'secret' %}
            
            <li class="post-item search-item" 
                data-title="{{ post.title }}" 
                data-tags="{{ post.tags | join: ',' }}"
                data-category="{{ post.category }}">
                
                <a href="{{ post.url | relative_url }}" class="thumb-link">
    {% if post.image %}
        <img src="{{ post.image | prepend: '/assets/thumbnails/' | relative_url }}" alt="thumb">
    {% else %}
        {% assign color_pool = "#780C1B,#121212,#3E3E3E,#5D101D,#2C2C2C,#4A0E12,#000000" | split: "," %}
        
        {% assign title_size = post.title | size %}
        {% assign date_num = post.date | date: "%s" | minus: 0 %} {% assign seed = title_size | plus: date_num %}
        {% assign color_index = seed | modulo: color_pool.size %}
        {% assign pick_color = color_pool[color_index] %}

        <div class="no-thumb-box" style="background-color: {{ pick_color }};">
            <span class="no-thumb-title">{{ post.title }}</span>
        </div>
    {% endif %}
</a>


                <div class="post-info">
                    <div class="post-meta" style="margin-bottom: 10px;">
                        <span style="color:#780C1B; font-family: 'Pretendard-Light'; font-weight:bold;">{{ post.category }}</span>
                        <span style="color: #999; font-family: 'Pretendard-Light'; font-size: 0.9em; margin-left:10px;">
                            {% for tag in post.tags %}#{{ tag }} {% endfor %}
                        </span>
                    </div>
                    <a href="{{ post.url | relative_url }}" style="font-size: 1.8rem; font-weight: bold; font-family: 'ChosunIlboMyungjo'; line-height: 1.3;">{{ post.title }}</a>
                </div>
            </li>
            
            {% endunless %}
            {% endfor %}
        </ul>
    </div> 
</div>

<script>
    // 1. ì™¼ìª½ ëŒ€ë¶„ë¥˜ ì „í™˜ (Mode Switch)
    function switchMode(mode, btn) {
        var links = document.querySelectorAll('.filter-link');
        for (var i = 0; i < links.length; i++) {
            links[i].classList.remove('active');
        }
        btn.classList.add('active');

        document.getElementById('submenu-all').style.display = 'none';
        document.getElementById('submenu-category').style.display = 'none';
        document.getElementById('submenu-tag').style.display = 'none';
        
        document.getElementById('submenu-' + mode).style.display = 'block';

        if(mode === 'all') {
            resetAllChips();
            filterItems('all', 'category'); 
            document.getElementById('current-status').innerText = "Showing All Posts";
        }
    }

    // [ë³´ì¡° í•¨ìˆ˜] ëª¨ë“  ì¹© ì´ˆê¸°í™” (ë¶ˆ ë„ê¸°)
    function resetAllChips() {
        var chips = document.querySelectorAll('.filter-chip');
        for (var i = 0; i < chips.length; i++) {
            chips[i].classList.remove('active');
        }
    }

    // 2. ì¹´í…Œê³ ë¦¬ í•„í„° (í† ê¸€ ê¸°ëŠ¥)
    function filterList(category, btn) {
        var targetBtn = btn || event.target; 
        var wasActive = targetBtn.classList.contains('active');

        resetAllChips();

        if (category !== 'all' && wasActive) {
            // ğŸ’¡ ì¼œì§„ ì¹´í…Œê³ ë¦¬ ë˜ ëˆ„ë¦„ -> ì·¨ì†Œ (ì „ì²´ë³´ê¸°)
            category = 'all';
            document.getElementById('current-status').innerText = "Showing All Posts";
            
            // "View All" ë²„íŠ¼ ë‹¤ì‹œ ì¼œì£¼ê¸°
            var viewAllBtn = document.getElementById('btn-cat-all');
            if(viewAllBtn) viewAllBtn.classList.add('active');

        } else {
            // êº¼ì§„ ê±° ëˆ„ë¦„ -> ì„ íƒ
            targetBtn.classList.add('active');
            
            if (category === 'all') {
                document.getElementById('current-status').innerText = "Showing All Posts";
            } else {
                document.getElementById('current-status').innerText = "Category: " + category;
            }
        }

        filterItems(category, 'category');
    }

    // 3. íƒœê·¸ ê²€ìƒ‰ (í† ê¸€ ê¸°ëŠ¥ ì¶”ê°€ë¨!)
    function filterSearch(keyword, btn) {
        var targetBtn = btn || event.target; 
        
        // 1) ì§€ê¸ˆ ëˆ„ë¥¸ íƒœê·¸ê°€ ì´ë¯¸ ë¹¨ê°„ìƒ‰(active)ì¸ì§€ í™•ì¸
        var wasActive = targetBtn.classList.contains('active');

        // 2) ì¼ë‹¨ ëª¨ë“  íƒœê·¸ë¥¼ í°ìƒ‰ìœ¼ë¡œ ì´ˆê¸°í™”
        resetAllChips();

        // 3) í† ê¸€ ë¡œì§
        if (wasActive) {
            // ğŸ’¡ ì¼œì ¸ ìˆë˜ íƒœê·¸ë¥¼ ë˜ ëˆŒë €ë‹¤ -> ì·¨ì†Œ! (ì „ì²´ ë³´ê¸°)
            // ê²€ìƒ‰ì–´(keyword)ë¥¼ ë¹„ì›Œì„œ ì „ì²´ ê¸€ì´ ë‚˜ì˜¤ê²Œ í•¨
            keyword = ''; 
            document.getElementById('current-status').innerText = "Showing All Posts";
            
            // íƒœê·¸ëŠ” 'View All' ë²„íŠ¼ì´ ì—†ìœ¼ë¯€ë¡œ, 
            // ëª¨ë“  ë²„íŠ¼ì´ êº¼ì§„ ìƒíƒœ(í°ìƒ‰)ê°€ ê³§ 'ì „ì²´ ë³´ê¸°' ìƒíƒœì…ë‹ˆë‹¤.
        } else {
            // ğŸ’¡ êº¼ì ¸ ìˆë˜ íƒœê·¸ë¥¼ ëˆŒë €ë‹¤ -> ì„ íƒ!
            targetBtn.classList.add('active'); // ë¹¨ê°„ë¶ˆ ì¼œê¸°
            document.getElementById('current-status').innerText = "Tag: #" + keyword;
        }

        // 4) í•„í„°ë§ ì‹¤í–‰
        filterItems(keyword, 'tag');
    }

    // [í•µì‹¬] í•„í„°ë§ ë¡œì§ (ìœ ì§€)
        // [í•µì‹¬] í•„í„°ë§ ë¡œì§ (ì—…ê·¸ë ˆì´ë“œ ë²„ì „) ğŸš€
    function filterItems(filterValue, type) {
        var items = document.getElementsByClassName('search-item');
        // í˜„ì¬ ë·° ëª¨ë“œ(ê·¸ë¦¬ë“œ/ë¦¬ìŠ¤íŠ¸) í™•ì¸
        var viewMode = document.getElementById('post-list').classList.contains('view-grid') ? 'block' : 'flex';
        
        // ê²€ìƒ‰ì–´(í•„í„°ê°’)ë¥¼ ì†Œë¬¸ìë¡œ ë°”ê¾¸ê³ , ì–‘ì˜† ê³µë°±ì„ ì—†ì•±ë‹ˆë‹¤ (ì²­ì†Œ ì‘ì—…)
        var cleanFilter = filterValue.toLowerCase().trim();

        for (var i = 0; i < items.length; i++) {
            var item = items[i];
            var isMatch = false;

            if (filterValue === 'all' || filterValue === '') {
                isMatch = true;
            } 
            // 1. ì¹´í…Œê³ ë¦¬ ë¹„êµ (ì •í™•íˆ ì¼ì¹˜í•´ì•¼ í•¨)
            else if (type === 'category') {
                var itemCat = item.getAttribute('data-category');
                // ë°ì´í„°ê°€ ë¹„ì–´ìˆì„ ìˆ˜ ìˆìœ¼ë‹ˆ ì•ˆì „ì¥ì¹˜
                if (itemCat) {
                    // ì¹´í…Œê³ ë¦¬ë„ ì†Œë¬¸ì+ê³µë°±ì œê±° í›„ ë¹„êµ
                    if (itemCat.toLowerCase().trim() === cleanFilter) isMatch = true;
                }
            } 
            // 2. íƒœê·¸ ë¹„êµ (ì‰¼í‘œë¡œ ìª¼ê°œì„œ í•˜ë‚˜í•˜ë‚˜ ë¹„êµ)
            else if (type === 'tag') {
                var rawTags = item.getAttribute('data-tags');
                if (rawTags) {
                    // "ì—­í‚¤ì¡,ë¡œë§¨ìŠ¤,í‚¤ì¡" -> ["ì—­í‚¤ì¡", "ë¡œë§¨ìŠ¤", "í‚¤ì¡"] ìœ¼ë¡œ ìª¼ê°­ë‹ˆë‹¤
                    var tagArray = rawTags.toLowerCase().split(',');
                    
                    // ìª¼ê°  ì¡°ê°ë“¤ ì¤‘ì— í•„í„°ê°’ê³¼ 'ì •í™•íˆ' ë˜‘ê°™ì€ ê²Œ ìˆëŠ”ì§€ í™•ì¸
                    for(var j=0; j < tagArray.length; j++) {
                        if(tagArray[j].trim() === cleanFilter) {
                            isMatch = true;
                            break; // ì°¾ì•˜ìœ¼ë©´ ê·¸ë§Œ ì°¾ì•„ë„ ë¨
                        }
                    }
                }
            }

            // ê²°ê³¼ ë°˜ì˜
            if (isMatch) item.style.display = viewMode;
            else item.style.display = 'none';
        }
    }


    // 4. ë·° ëª¨ë“œ ë³€ê²½ (ìœ ì§€)
    function changeView(type) {
        var list = document.getElementById('post-list');
        var btnGrid = document.getElementById('btn-grid');
        var btnList = document.getElementById('btn-list');

        if (type === 'grid') {
            btnGrid.classList.add('active');
            btnList.classList.remove('active');
            list.classList.remove('view-list');
            list.classList.add('view-grid');
        } else {
            btnList.classList.add('active');
            btnGrid.classList.remove('active');
            list.classList.remove('view-grid');
            list.classList.add('view-list');
        }
        
        var items = document.getElementsByClassName('search-item');
        var displayStyle = type === 'grid' ? 'block' : 'flex';
        for(var i=0; i<items.length; i++) {
            if(items[i].style.display !== 'none') {
                items[i].style.display = displayStyle;
            }
        }
    }
    
    // 5. ê²€ìƒ‰ì°½ ê¸°ëŠ¥ (ìœ ì§€)
    document.getElementById('search-input').addEventListener('keyup', function() {
        var val = this.value.toLowerCase();
        document.getElementById('current-status').innerText = "Searching: " + val;
        
        var items = document.getElementsByClassName('search-item');
        var viewMode = document.getElementById('post-list').classList.contains('view-grid') ? 'block' : 'flex';

        for (var i = 0; i < items.length; i++) {
            var title = items[i].getAttribute('data-title').toLowerCase();
            var tags = items[i].getAttribute('data-tags').toLowerCase();
            if (title.includes(val) || tags.includes(val)) {
                items[i].style.display = viewMode;
            } else {
                items[i].style.display = 'none';
            }
        }
    });
</script>
