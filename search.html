---
layout: default
title: Archive
---

<div class="hero">
    <h1 style="font-family: 'Gruppo', sans-serif;">ARCHIVE</h1>
</div>

<div class="archive-container">
    
    <div class="archive-top-section">
        
        <aside class="sidebar">
            <div class="sidebar-section">
                <input type="text" id="search-input" placeholder="Search..." 
                style="width: 100%; box-sizing: border-box; padding: 10px 0; border: none; border-bottom: 2px solid #111; background: transparent; font-family: 'Noto Sans KR'; outline: none; border-radius: 0;">
            </div>

            <div class="sidebar-section">
                <span class="sidebar-title">MENU</span>
                <div class="filter-group">
                    <span class="filter-link active" onclick="switchMode('all', this)">ALL POSTS</span>
                    <span class="filter-link" onclick="switchMode('category', this)">BY CATEGORY</span>
                    <span class="filter-link" onclick="switchMode('tag', this)">BY TAGS</span>
                </div>
            </div>
        </aside>

        <div class="filter-panel">
            <div id="submenu-all" class="submenu-box" style="display: block;">
                <h2 style="font-family:'Gruppo'; margin-top:0;">ALL ARCHIVES</h2>
                <span class="submenu-desc">Explore the entire history of Maguire & Ross.</span>
            </div>

            <div id="submenu-category" class="submenu-box" style="display: none;">
                <h2 style="font-family:'Gruppo'; margin-top:0;">CATEGORY</h2>
                <div class="chip-container">
                    <button class="filter-chip" onclick="filterList('all')">View All</button>
                    {% assign sorted_categories = site.categories | sort %}
                    {% for category in sorted_categories %}
                        {% assign cat_name = category[0] %}
                        {% assign show_cat = false %}
                        {% for post in category[1] %}
                            {% unless post.type == 'Secret' %}{% assign show_cat = true %}{% endunless %}
                        {% endfor %}
                        {% if show_cat %}
                        <button class="filter-chip" onclick="filterList('{{ cat_name }}')">{{ cat_name }}</button>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>

            <div id="submenu-tag" class="submenu-box" style="display: none;">
                <h2 style="font-family:'Gruppo'; margin-top:0;">TAGS</h2>
                <div class="chip-container">
                    {% assign sorted_tags = site.tags | sort %}
                    {% for tag in sorted_tags %}
                        {% assign tag_name = tag[0] %}
                        {% assign show_tag = false %}
                        {% for post in tag[1] %}
                            {% unless post.type == 'Secret' %}{% assign show_tag = true %}{% endunless %}
                        {% endfor %}
                        {% if show_tag %}
                        <button class="filter-chip" onclick="filterSearch('{{ tag_name }}')">#{{ tag_name }}</button>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div> <div class="archive-bottom-section">
        
        <div class="view-options-bar">
            <span id="current-status" style="color:#888; font-size:0.9rem;">Showing All</span>
            <div>
                <button onclick="changeView('grid')" id="btn-grid">▦</button>
                <button onclick="changeView('list')" id="btn-list" class="active">≡</button>
            </div>
        </div>

        <ul id="post-list" class="post-list view-list">
            {% for post in site.posts %}
            {% assign p_type = post.type | downcase %}
            {% unless p_type == 'secret' %}
            
            <li class="post-item search-item" 
                data-title="{{ post.title }}" 
                data-tags="{{ post.tags | join: ',' }}"
                data-category="{{ post.category }}">
                
                <a href="{{ post.url | relative_url }}" class="thumb-link">
                    {% if post.image %}
                        <img src="{{ post.image | prepend: '/assets/thumbnails/' | relative_url }}" alt="thumb">
                    {% else %}
                        <img src="{{ 'main_image.jpeg' | relative_url }}" alt="thumb">
                    {% endif %}
                </a>

                <div style="flex: 1;">
                    <div class="post-meta">
                        {{ post.category }} 
                        <span style="color: #999; font-size: 0.8em;">
                            {% for tag in post.tags %}#{{ tag }} {% endfor %}
                        </span>
                    </div>
                    <a href="{{ post.url | relative_url }}" style="font-size: 1.2rem; font-weight: bold;">{{ post.title }}</a>
                </div>
            </li>
            
            {% endunless %}
            {% endfor %}
        </ul>
    </div> </div>


<style>
    /* 상단 메뉴 박스 */
    .archive-header-area {
        min-height: 60px; /* 높이 확보 */
        margin-bottom: 20px;
        padding-bottom: 20px;
        border-bottom: 1px solid #eee;
    }
    .submenu-title { font-family: 'Gruppo'; font-weight: bold; margin-right: 10px; }
    .submenu-desc { color: #888; font-style: italic; }
    
    /* 둥근 버튼 (Chip) 스타일 */
    .chip-container { display: inline-flex; flex-wrap: wrap; gap: 8px; vertical-align: middle; }
    .filter-chip {
        background: #fff;
        border: 1px solid #ddd;
        border-radius: 20px;
        padding: 5px 15px;
        font-size: 0.9rem;
        cursor: pointer;
        transition: 0.2s;
        font-family: 'Noto Sans KR';
        color: #666;
    }
    .filter-chip:hover, .filter-chip.active {
        background: #111;
        color: #fff;
        border-color: #111;
    }

    /* 뷰 옵션 바 */
    .view-options-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
    .view-options-bar button { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #ccc; }
    .view-options-bar button.active { color: #111; }
</style>

<script>
    // 1. 왼쪽 대분류 전환 (Mode Switch)
    function switchMode(mode, btn) {
        // 왼쪽 버튼 스타일 업데이트
        document.querySelectorAll('.filter-link').forEach(el => el.classList.remove('active'));
        btn.classList.add('active');

        // 오른쪽 상단 메뉴 박스 교체
        document.getElementById('submenu-all').style.display = 'none';
        document.getElementById('submenu-category').style.display = 'none';
        document.getElementById('submenu-tag').style.display = 'none';

        document.getElementById('submenu-' + mode).style.display = 'block';

        // ALL을 누르면 목록도 초기화
        if(mode === 'all') {
            filterList('all');
            document.getElementById('current-status').innerText = "Showing All Posts";
        }
    }

    // 2. 카테고리/태그 필터링 (기존 기능 + 버튼 활성화)
    function filterList(category) {
        // 버튼 색깔 켜기
        document.querySelectorAll('.filter-chip').forEach(el => el.classList.remove('active'));
        event.target.classList.add('active'); // 클릭한 놈만 켜짐

        document.getElementById('current-status').innerText = "Filter: " + category;
        
        const items = document.getElementsByClassName('search-item');
        for (let item of items) {
            let itemCat = item.getAttribute('data-category');
            if (category === 'all' || itemCat === category) {
                item.style.display = 'flex';
            } else {
                item.style.display = 'none';
            }
        }
    }

    function filterSearch(keyword) {
        // 버튼 색깔 켜기
        document.querySelectorAll('.filter-chip').forEach(el => el.classList.remove('active'));
        event.target.classList.add('active');

        document.getElementById('current-status').innerText = "Tag: #" + keyword;
        
        const items = document.getElementsByClassName('search-item');
        for (let item of items) {
            let tags = item.getAttribute('data-tags').toLowerCase();
            if (tags.includes(keyword.toLowerCase())) {
                item.style.display = 'flex';
            } else {
                item.style.display = 'none';
            }
        }
    }

    // 3. 뷰 모드 (그리드/리스트)
    function changeView(type) {
        const list = document.getElementById('post-list');
        document.getElementById('btn-grid').classList.toggle('active', type === 'grid');
        document.getElementById('btn-list').classList.toggle('active', type === 'list');

        if (type === 'grid') {
            list.classList.remove('view-list');
            list.classList.add('view-grid');
        } else {
            list.classList.remove('view-grid');
            list.classList.add('view-list');
        }
    }
    
    // 4. 검색창 기능 (유지)
    document.getElementById('search-input').addEventListener('keyup', function() {
        let val = this.value.toLowerCase();
        document.getElementById('current-status').innerText = "Searching: " + val;
        const items = document.getElementsByClassName('search-item');
        for (let item of items) {
            let title = item.getAttribute('data-title').toLowerCase();
            let tags = item.getAttribute('data-tags').toLowerCase();
            if (title.includes(val) || tags.includes(val)) {
                item.style.display = 'flex';
            } else {
                item.style.display = 'none';
            }
        }
    });
</script>
