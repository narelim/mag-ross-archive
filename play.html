---
layout: null
permalink: /play/
---
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Library</title>
    <link rel="stylesheet" href="{{ '/assets/css/play-style.css' | relative_url }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="play-mode">

    <div class="sidebar-overlay" onclick="toggleSidebar()"></div>
    <div class="play-sidebar" id="sidebar">
        <div class="sidebar-profile">
            <div class="profile-img"><i class="fas fa-user"></i></div>
            <div class="profile-name">ì¬ì€ë‹˜ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬</div>
            <div class="profile-desc">ë‚˜ë§Œì˜ ì° ë°±ì—… ì €ì¥ì†Œ ğŸŒ¸</div>
        </div>
        <div class="sidebar-menu">
            <div class="sidebar-item" onclick="filterList('all')">
                <i class="fas fa-list"></i> ì „ì²´ ì‘í’ˆ ë³´ê¸°
            </div>
            <div class="sidebar-item" onclick="filterList('liked')">
                <i class="fas fa-heart"></i> ì°œí•œ ì‘í’ˆ ëª¨ì•„ë³´ê¸°
            </div>
            <div class="sidebar-divider"></div>
            <div class="sidebar-item" onclick="location.href='/'">
                <i class="fas fa-home"></i> ë©”ì¸ìœ¼ë¡œ ë‚˜ê°€ê¸°
            </div>
            <div class="sidebar-item" onclick="toggleSidebar()">
                <i class="fas fa-times"></i> ë©”ë‰´ ë‹«ê¸°
            </div>
        </div>
    </div>

    <header class="play-header">
        <div class="play-title">
            <i class="fas fa-bars play-icon-menu" onclick="toggleSidebar()"></i> 
            <span>ë¼ì´ë¸ŒëŸ¬ë¦¬</span>
        </div>
        <div>
            <i class="fas fa-search play-icon-menu" style="margin-right:15px;"></i>
            <i class="fas fa-sort-amount-down play-icon-menu"></i>
        </div>
    </header>

    <div class="play-filter-bar">
        <div class="play-chip active" id="chip-all">ì „ì²´</div>
        <div class="play-chip" id="chip-liked">ì°œí•œ ì‘í’ˆ</div>
    </div>

    <div class="play-container" id="play-list">
        </div>


<script>
    // --- 0. ì‚¬ì´ë“œë°” ì—´ê³  ë‹«ê¸° ê¸°ëŠ¥ ---
    function toggleSidebar() {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.querySelector('.sidebar-overlay');
        sidebar.classList.toggle('active');
        overlay.classList.toggle('active');
    }

    // --- 1. ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ---
    const allPosts = [
        {% for post in site.posts %}
        {
            title: "{{ post.title | replace: '"', '\"' }}",
            url: "{{ post.url | relative_url }}",
            date: "{{ post.date | date: '%Y.%m.%d' }}",
            author: "{{ post.author | default: 'Unknown' }}",
            seriesId: "{{ post.series_id | strip }}", 
            tags: {{ post.tags | jsonify }}, 
            layout: "{{ post.layout | strip }}",
            {% if post.image %}
                {% if post.image contains '/' %}
                    image: "{{ post.image | relative_url }}",
                {% else %}
                    image: "{{ '/assets/img/' | append: post.image | relative_url }}",
                {% endif %}
            {% else %}
                image: "",
            {% endif %}
        },
        {% endfor %}
        
        {% for page in site.pages %}
            {% if page.series_id %}
            {
                title: "{{ page.title | replace: '"', '\"' }}",
                url: "{{ page.url | relative_url }}",
                date: "{{ page.date | default: site.time | date: '%Y.%m.%d' }}",
                author: "{{ page.author | default: 'Unknown' }}",
                seriesId: "{{ page.series_id | strip }}", 
                tags: {{ page.tags | jsonify }}, 
                layout: "{{ page.layout | strip }}",
                {% if page.image %}
                    {% if page.image contains '/' %}
                        image: "{{ page.image | relative_url }}",
                    {% else %}
                        image: "{{ '/assets/img/' | append: page.image | relative_url }}",
                    {% endif %}
                {% else %}
                    image: "",
                {% endif %}
            },
            {% endif %}
        {% endfor %}
    ];

    const urlParams = new URLSearchParams(window.location.search);
    const targetId = (urlParams.get('id') || "").trim(); 
    const listContainer = document.getElementById('play-list');

    // --- 2. ì°œí•˜ê¸° ê¸°ëŠ¥ (LocalStorage) ---
    // ë‚´ ë¸Œë¼ìš°ì €ì— ì €ì¥ëœ ì°œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
    function getLikedItems() {
        const stored = localStorage.getItem('my_liked_posts');
        return stored ? JSON.parse(stored) : [];
    }

    // ì°œ ë²„íŠ¼ ëˆŒë €ì„ ë•Œ ì‹¤í–‰
    function toggleLike(url, btn) {
        // ì´ë²¤íŠ¸ ë²„ë¸”ë§ ë°©ì§€ (ë¦¬ìŠ¤íŠ¸ í´ë¦­í•´ì„œ ì´ë™í•˜ëŠ” ê²ƒ ë§‰ê¸°)
        event.preventDefault(); 
        event.stopPropagation();

        let likes = getLikedItems();
        
        if (likes.includes(url)) {
            // ì´ë¯¸ ì°œí–ˆìœ¼ë©´ -> ì·¨ì†Œ
            likes = likes.filter(item => item !== url);
            btn.classList.remove('liked');
            btn.innerHTML = '<i class="far fa-heart"></i>'; // ë¹ˆ í•˜íŠ¸
        } else {
            // ì°œ ì•ˆí–ˆìœ¼ë©´ -> ì¶”ê°€
            likes.push(url);
            btn.classList.add('liked');
            btn.innerHTML = '<i class="fas fa-heart"></i>'; // ì±„ìš´ í•˜íŠ¸
        }

        // ì €ì¥
        localStorage.setItem('my_liked_posts', JSON.stringify(likes));
    }


    // --- 3. ë¦¬ìŠ¤íŠ¸ ê·¸ë¦¬ê¸° í•¨ìˆ˜ (í•„í„° ê¸°ëŠ¥ í¬í•¨) ---
    function renderList(filterType) {
        listContainer.innerHTML = ''; // ì´ˆê¸°í™”
        let count = 0;
        const myLikes = getLikedItems(); // ì°œ ëª©ë¡ ë¡œë”©

        // ì¹© ìŠ¤íƒ€ì¼ ë³€ê²½
        document.getElementById('chip-all').classList.toggle('active', filterType === 'all');
        document.getElementById('chip-liked').classList.toggle('active', filterType === 'liked');

        allPosts.forEach(post => {
            // ê¸°ë³¸ ì¡°ê±´: IDê°€ ê°™ê³ , ìƒí’ˆí˜ì´ì§€ê°€ ì•„ë‹ ê²ƒ
            let isValid = (post.seriesId === targetId && post.layout !== 'product');

            // ì°œí•œ ì‘í’ˆ ë³´ê¸° ëª¨ë“œë¼ë©´? -> ì°œ ëª©ë¡ì— ìˆëŠ”ì§€ ì¶”ê°€ í™•ì¸
            if (filterType === 'liked') {
                if (!myLikes.includes(post.url)) isValid = false;
            }

            if (isValid) {
                let thumbImg = post.image && post.image !== "" ? post.image : "https://via.placeholder.com/90x90?text=No+Img";
                let badgeHTML = post.tags && post.tags.length > 0 ? `<span class="play-badge">${post.tags[0]}</span>` : "";

                // ì´ ê¸€ì´ ì°œ ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
                const isLiked = myLikes.includes(post.url);
                const heartClass = isLiked ? 'liked' : '';
                const heartIcon = isLiked ? 'fas fa-heart' : 'far fa-heart';

                const itemHTML = `
                    <div class="play-item-wrapper" style="position:relative;">
                        <a href="${post.url}" class="play-item">
                            <div class="play-thumb">
                                <img src="${thumbImg}" alt="thumb">
                            </div>
                            <div class="play-info">
                                <div class="play-item-title">${post.title}</div>
                                <div class="play-item-meta">${post.author} Â· ${post.date}</div>
                                ${badgeHTML}
                            </div>
                        </a>
                        <div class="play-like-btn ${heartClass}" onclick="toggleLike('${post.url}', this)">
                            <i class="${heartIcon}"></i>
                        </div>
                    </div>
                `;
                listContainer.innerHTML += itemHTML;
                count++;
            }
        });

        if (count === 0) {
            let msg = filterType === 'liked' ? "ì°œí•œ ì‘í’ˆì´ ì—†ìŠµë‹ˆë‹¤." : "ì—°ê²°ëœ ì—í”¼ì†Œë“œê°€ ì—†ìŠµë‹ˆë‹¤.";
            listContainer.innerHTML = `
                <div style="text-align:center; padding:50px; color:#888;">
                    <i class="far fa-folder-open" style="font-size:3rem; margin-bottom:10px;"></i><br>
                    ${msg}
                </div>`;
        }
        
        // ëª¨ë°”ì¼ì—ì„œ ë©”ë‰´ ëˆ„ë¥´ê³  ë‚˜ë©´ ì‚¬ì´ë“œë°” ë‹«ì•„ì£¼ê¸°
        document.getElementById('sidebar').classList.remove('active');
        document.querySelector('.sidebar-overlay').classList.remove('active');
    }

    // --- 4. ë©”ë‰´ í´ë¦­ ì‹œ ì‹¤í–‰ í•¨ìˆ˜ ---
    function filterList(type) {
        renderList(type);
    }

    // ì²˜ìŒ ì‹œì‘í•  ë• 'ì „ì²´(all)' ë³´ì—¬ì£¼ê¸°
    renderList('all');

</script>
</body>
</html>
