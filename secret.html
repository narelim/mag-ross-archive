---
layout: page
title: "Secret Archive"
permalink: /secret/
---

<link rel="stylesheet" href="{{ '/assets/css/dl-style.css' | relative_url }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<style>
    /* ğŸš¨ [í•µì‹¬] ìƒë‹¨ ê³µë°± ì œê±°ìš© ê°•ì œ ìŠ¤íƒ€ì¼ */
    
    /* 1. í…Œë§ˆê°€ ê¸°ë³¸ìœ¼ë¡œ ì£¼ëŠ” ì—¬ë°± ì—†ì• ê¸° */
    .page-content, .wrapper, .post-content {
        padding-top: 0 !important;
        margin-top: 0 !important;
    }

    /* 2. í…Œë§ˆê°€ ìë™ìœ¼ë¡œ ë„£ëŠ” ì œëª©(íƒ€ì´í‹€) ìˆ¨ê¸°ê¸° 
       (ì¬ì€ë‹˜ì´ ë§Œë“  'SECRET ARCHIVE'ë‘ ì¤‘ë³µë¼ì„œ ê³µê°„ë§Œ ì°¨ì§€í•  ìˆ˜ ìˆìŒ) */
    .post-header, .page-header, .post-title {
        display: none !important;
    }

    /* 3. ìš°ë¦¬ê°€ ë§Œë“  ì»¨í…ì¸ ë¥¼ ìœ„ë¡œ ë°”ì§ ë¶™ì´ê¸° */
    #secret-content {
        margin-top: 0 !important; /* ìœ„ìª½ ì—¬ë°± ì œê±° */
        padding-top: 10px !important; /* ìµœì†Œí•œì˜ ìˆ¨êµ¬ë©ë§Œ */
    }

    /* 4. ì „ì²´ í­ ë„“ê²Œ ì“°ê¸° (ì„ íƒì‚¬í•­) */
    .container { max-width: 100% !important; padding: 0 15px !important; }

    
    /* --- ê¸°ì¡´ ìŠ¤íƒ€ì¼ ìœ ì§€ --- */
    
    /* ì ê¸ˆ í™”ë©´ */
    #lock-gate {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: #FFF9FB;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        z-index: 9999;
    }
    .lock-input {
        padding: 12px; border: 1px solid #ddd; border-radius: 20px;
        width: 200px; text-align: center; margin-bottom: 10px;
    }
    .lock-btn {
        padding: 10px 25px; background: #E87A90; color: white; border: none;
        border-radius: 20px; cursor: pointer; font-weight: bold;
        box-shadow: 0 4px 10px rgba(232, 122, 144, 0.3);
    }

    /* íƒœê·¸ ë²„íŠ¼ */
    .filter-btn {
        display: inline-block; font-size: 0.85rem;
        background: #fff; color: #555;
        padding: 6px 12px; border-radius: 20px; margin: 4px;
        border: 1px solid #eee; cursor: pointer; transition: all 0.2s;
    }
    .filter-btn:hover { border-color: #E87A90; color: #E87A90; }
    .filter-btn.active {
        background: #E87A90; color: #fff; border-color: #E87A90;
        box-shadow: 0 2px 5px rgba(232, 122, 144, 0.3);
    }

/* --- ğŸ“± ëª¨ë°”ì¼ ì „ìš© UI (FAB & Bottom Sheet) --- */

/* 1. ë‘¥ê·¼ í”Œë¡œíŒ… ë²„íŠ¼ (ëª¨ë°”ì¼ë§Œ ë³´ì„) */
.dl-fab-btn {
    position: fixed; 
    bottom: 30px; 
    right: 20px;
    width: 55px; height: 55px;
    background: #E87A90; color: white;
    border-radius: 50%;
    display: none; /* PCì—ì„  ìˆ¨ê¹€ */
    align-items: center; justify-content: center;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    z-index: 2000; cursor: pointer; font-size: 1.2rem;
    transition: transform 0.2s;
}
.dl-fab-btn:active { transform: scale(0.9); }

/* 2. ë°”í…€ ì‹œíŠ¸ ë°°ê²½ (ì˜¤ë²„ë ˆì´) */
.dl-sheet-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.5); z-index: 2001;
    opacity: 0; visibility: hidden; transition: 0.3s;
}
.dl-sheet-overlay.active { opacity: 1; visibility: visible; }

/* 3. ë°”í…€ ì‹œíŠ¸ ë³¸ì²´ (ìˆ˜ì •ë¨ ğŸš¨) */
.dl-bottom-sheet {
    position: fixed; 
    left: 0; width: 100%;
    
    /* ë†’ì´ ì„¤ì •: í™”ë©´ì˜ 85%ë§Œ ì°¨ì§€í•˜ê²Œ */
    height: 85vh; 
    bottom: -100%; /* í‰ì†Œì—” ì•„ë˜ì— ìˆ¨ê¹€ */
    
    background: #fff;
    border-top-left-radius: 20px; border-top-right-radius: 20px;
    z-index: 2002;
    transition: bottom 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    
    /* ğŸš¨ ë‚´ë¶€ ë ˆì´ì•„ì›ƒ (í—¤ë”-ë‚´ìš©-í‘¸í„° ë¶„ë¦¬) */
    display: flex; 
    flex-direction: column;

    /* ê·¸ë¦¼ì ì¶”ê°€ */
    box-shadow: 0 -5px 25px rgba(0,0,0,0.15);
}

/* í™œì„±í™”ë˜ë©´ ì˜¬ë¼ì˜´ */
.dl-bottom-sheet.active { bottom: 0; }


/* --- ì‹œíŠ¸ ë‚´ë¶€ êµ¬ì¡° ìŠ¤íƒ€ì¼ --- */

/* (A) í—¤ë”: ê³ ì • */
.sheet-header {
    padding: 20px 20px 15px 20px;
    border-bottom: 1px solid #eee;
    display: flex; justify-content: space-between; align-items: center;
    flex-shrink: 0; /* ì°Œê·¸ëŸ¬ì§ ë°©ì§€ */
}

/* (B) íƒœê·¸ ëª©ë¡: ë‚¨ì€ ê³µê°„ ë‹¤ ì°¨ì§€ + ìŠ¤í¬ë¡¤ */
#mobile-tag-container {
    flex: 1;           /* ë‚¨ì€ ë†’ì´ ë‹¤ ì°¨ì§€í•´ë¼ */
    overflow-y: auto;  /* ë‚´ìš© ë„˜ì¹˜ë©´ ìŠ¤í¬ë¡¤ */
    padding: 20px;
    
    /* ìŠ¤í¬ë¡¤ ë¶€ë“œëŸ½ê²Œ */
    -webkit-overflow-scrolling: touch; 
}

/* (C) í‘¸í„°(ì´ˆê¸°í™” ë²„íŠ¼): ë°”ë‹¥ì— ê³ ì • */
.sheet-footer {
    padding: 15px 20px;
    border-top: 1px solid #f5f5f5;
    background: #fff; /* ë°°ê²½ìƒ‰ í•„ìˆ˜ */
    flex-shrink: 0;
    
    /* ğŸš¨ ì•„ì´í° í•˜ë‹¨ ë°”(Home Bar) ì¹¨ë²” ë°©ì§€ ì½”ë“œ */
    padding-bottom: calc(15px + env(safe-area-inset-bottom));
}


    /* ë°˜ì‘í˜• */
    .dl-sidebar { display: block; width: 250px; flex-shrink: 0; }
    .dl-main { flex: 1; }
    .dl-container { display: flex; gap: 30px; max-width: 1200px; margin: 0 auto; }
    @media screen and (max-width: 768px) {
        .dl-sidebar { display: none !important; }
        .dl-container { display: block; }
        .dl-fab-btn { display: flex !important; }
    }
</style>

<div id="lock-gate">
    <h2 style="font-family: 'Noto Serif KR'; color: #E87A90; font-size: 2rem; margin-bottom:10px;">Secret Archive</h2>
    <p style="color: #888; margin-bottom: 20px; font-size: 0.9rem;">
        ë¹„ë°€ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.
    </p>
    <input type="password" id="user-pass" class="lock-input" placeholder="Password">
    <button onclick="unlock()" class="lock-btn">Enter</button>
    <p id="error-msg" style="color: #E87A90; font-size: 0.8rem; margin-top: 15px; display: none;">
        ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.
    </p>
</div>

<div id="secret-content" style="display: none;">
    
    <div style="text-align:center; margin-bottom: 30px; margin-top: 10px;">
        <h1 style="font-family: 'Noto Serif KR'; font-size: 2.2rem; color: #333; margin-bottom: 5px;">SECRET ARCHIVE</h1>
        <p style="color: #999; font-size: 0.9rem;">Douglas x Adeline : Unspoken Stories</p>
    </div>

    <div class="dl-container">
        <aside class="dl-sidebar">
            <div class="dl-menu-box" style="background:#f9f9f9; padding:20px; border-radius:10px;">
                <div style="font-weight:bold; margin-bottom:15px; color:#555;">ğŸ·ï¸ íƒœê·¸ í•„í„°</div>
                <div id="pc-tag-container"></div>
                <div style="text-align: center; margin-top: 20px;">
                    <button onclick="resetFilters()" style="font-size: 0.8rem; color: #999; background:none; border:none; cursor:pointer; text-decoration: underline;">
                        â†º í•„í„° ì´ˆê¸°í™”
                    </button>
                </div>
            </div>
        </aside>

        <main class="dl-main">
            <div class="dl-section-header" style="display:flex; justify-content:space-between; margin-bottom:20px; align-items:center;">
                <h2 style="font-size:1.3rem; font-weight:bold; margin:0;">ì‘í’ˆ ëª©ë¡</h2>
                <span id="item-count" style="color:#888; font-size:0.9rem;">Loading...</span>
            </div>

            <div class="dl-grid" id="post-grid">
                {% for post in site.posts %}
                    {% if post.type == 'Secret' or post.categories contains 'secret' %}
                    <a href="{{ post.url | relative_url }}" class="dl-card" 
                       data-tags="{{ post.tags | join: ',' }}" style="display:flex;">
                        <div class="dl-thumb">
                            <span class="dl-badge" style="background:#E87A90;">Secret</span>
                            {% if post.image %}
                                {% if post.image contains '/' %}
                                    <img src="{{ post.image | relative_url }}" alt="thumb">
                                {% else %}
                                    <img src="{{ '/assets/img/' | append: post.image | relative_url }}" alt="thumb">
                                {% endif %}
                            {% else %}
                                <div style="background:#eee; width:100%; height:100%;"></div>
                            {% endif %}
                        </div>
                        <div class="dl-info">
                            <h3 class="dl-title">{{ post.title }}</h3>
                            <div class="dl-tags">
                                {% for tag in post.tags limit:3 %}
                                    <span class="dl-tag">#{{ tag }}</span>
                                {% endfor %}
                            </div>
                            <div class="dl-footer">
                                <span class="dl-price">{{ post.date | date: "%Y.%m.%d" }}</span>
                            </div>
                        </div>
                    </a>
                    {% endif %}
                {% endfor %}
                <div id="no-result-msg" style="display:none; text-align:center; padding:50px; color:#888; width:100%;">
                    ì¡°ê±´ì— ë§ëŠ” ì‘í’ˆì´ ì—†ìŠµë‹ˆë‹¤.
                </div>
            </div>
        </main>
    </div>
</div>

<div class="dl-fab-btn" onclick="toggleSheet()">
    <i class="fas fa-filter"></i>
</div>
<div class="dl-sheet-overlay" id="sheetOverlay" onclick="toggleSheet()"></div>

<div class="dl-bottom-sheet" id="tagSheet">
    
    <div class="sheet-header">
        <span style="font-weight:bold; font-size:1.1rem;">íƒœê·¸ ê²€ìƒ‰</span>
        <span onclick="toggleSheet()" style="cursor:pointer; font-size:1.2rem; padding:5px;">
            <i class="fas fa-times"></i>
        </span>
    </div>
    
    <div id="mobile-tag-container">
        </div>

    <div class="sheet-footer">
         <button onclick="resetFilters(); toggleSheet();" 
                 style="width:100%; padding:14px; background:#f5f5f5; border:none; border-radius:12px; font-weight:bold; color:#555; font-size:0.95rem;">
            í•„í„° ì´ˆê¸°í™”
        </button>
    </div>
</div>
    </div>
</div>

<script>
    // === [A] ì ê¸ˆ í•´ì œ ===
    document.addEventListener("DOMContentLoaded", function() {
        if (localStorage.getItem("secret_unlocked") === "true") {
            grantAccess();
        }
    });

    function unlock() {
        var password = "201107"; 
        var input = document.getElementById("user-pass").value;
        if (input === password) {
            localStorage.setItem("secret_unlocked", "true");
            grantAccess();
        } else {
            var msg = document.getElementById("error-msg");
            msg.style.display = "block";
            setTimeout(() => { msg.style.display = "none"; }, 1500);
        }
    }

    function grantAccess() {
        document.getElementById("lock-gate").style.display = "none";
        document.getElementById("secret-content").style.display = "block";
        initTagSystem();
    }

    // === [B] íƒœê·¸ ì‹œìŠ¤í…œ ===
    let selectedTags = new Set();

    function initTagSystem() {
        const cards = document.querySelectorAll('.dl-card');
        const pcContainer = document.getElementById('pc-tag-container');
        const mobileContainer = document.getElementById('mobile-tag-container');

        if (pcContainer.children.length > 0) return;

        let allTags = new Set();
        let totalCount = 0;
        cards.forEach(card => {
            totalCount++;
            if(card.dataset.tags) {
                card.dataset.tags.split(',').forEach(tag => {
                    if(tag.trim()) allTags.add(tag.trim());
                });
            }
        });
        document.getElementById('item-count').innerText = `Total ${totalCount} Items`;

        Array.from(allTags).sort().forEach(tag => {
            pcContainer.appendChild(createTagBtn(tag));
            mobileContainer.appendChild(createTagBtn(tag));
        });
    }

    function createTagBtn(tag) {
        const btn = document.createElement('span');
        btn.className = 'filter-btn';
        btn.dataset.tag = tag;
        btn.innerText = '#' + tag;
        btn.onclick = () => toggleTag(tag);
        return btn;
    }

    function toggleTag(tag) {
        if (selectedTags.has(tag)) selectedTags.delete(tag);
        else selectedTags.add(tag);

        document.querySelectorAll(`.filter-btn[data-tag="${tag}"]`).forEach(btn => {
            if (selectedTags.has(tag)) btn.classList.add('active');
            else btn.classList.remove('active');
        });
        applyFilter();
    }

    function applyFilter() {
        const cards = document.querySelectorAll('.dl-card');
        let visibleCount = 0;
        cards.forEach(card => {
            const cardTags = card.dataset.tags ? card.dataset.tags.split(',') : [];
            const isMatch = Array.from(selectedTags).every(t => cardTags.includes(t));
            if (isMatch) {
                card.style.display = "flex";
                visibleCount++;
            } else {
                card.style.display = "none";
            }
        });
        document.getElementById('no-result-msg').style.display = (visibleCount === 0) ? "block" : "none";
        document.getElementById('item-count').innerText = `Total ${visibleCount} Items`;
    }

    function resetFilters() {
        selectedTags.clear();
        document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
        applyFilter();
    }

    // === [C] ì‹œíŠ¸ í† ê¸€ ===
    function toggleSheet() {
        const sheet = document.getElementById('tagSheet');
        const overlay = document.getElementById('sheetOverlay');
        sheet.classList.toggle('active');
        overlay.classList.toggle('active');
    }
</script>
