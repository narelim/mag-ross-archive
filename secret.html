---
layout: page
title: "Secret Archive"
permalink: /secret/
---

<link rel="stylesheet" href="{{ '/assets/css/dl-style.css' | relative_url }}">

<style>
    .container, .page-content { max-width: 1200px; padding: 40px 20px !important; }
    .post-header { display: none; }

/* ğŸ”’ ì ê¸ˆ í™”ë©´ ìŠ¤íƒ€ì¼ */
        #lock-gate {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #FFF9FB;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 9999;
        }
        .lock-input {
            padding: 12px; border: 1px solid #ddd; border-radius: 20px;
            width: 200px; text-align: center; margin-bottom: 10px;
        }
        .lock-btn {
            padding: 10px 25px; background: #E87A90; color: white; border: none;
            border-radius: 20px; cursor: pointer; font-weight: bold;
            box-shadow: 0 4px 10px rgba(232, 122, 144, 0.3);
        }
    
    /* í•„í„° ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .filter-btn {
        display: inline-block;
        font-size: 0.85rem;
        background: #f5f5f5;
        color: #555;
        padding: 6px 12px;
        border-radius: 20px;
        margin: 4px;
        border: 1px solid #ddd;
        cursor: pointer;
        transition: all 0.2s;
        user-select: none; /* ë“œë˜ê·¸ ë°©ì§€ */
    }
    .filter-btn:hover {
        background: #ffeef5;
        color: #E6007E;
        border-color: #E6007E;
    }
    /* ğŸš¨ ì„ íƒë˜ì—ˆì„ ë•Œ (í™œì„±í™”) */
    .filter-btn.active {
        background: #E6007E;  /* í•‘í¬ìƒ‰ ë°°ê²½ */
        color: #fff;           /* í°ìƒ‰ ê¸€ì”¨ */
        border-color: #E6007E;
        font-weight: bold;
        box-shadow: 0 2px 5px rgba(230, 0, 126, 0.3);
    }

          /* --- ğŸ“± ëª¨ë°”ì¼ ì „ìš© UI (FAB & Bottom Sheet) --- */
        
        /* 1. ë‘¥ê·¼ í”Œë¡œíŒ… ë²„íŠ¼ (ëª¨ë°”ì¼ë§Œ ë³´ì„) */
        .dl-fab-btn {
            position: fixed; bottom: 30px; right: 20px;
            width: 55px; height: 55px;
            background: #E87A90; color: white;
            border-radius: 50%;
            display: none; /* PCì—ì„  ìˆ¨ê¹€ */
            align-items: center; justify-content: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 2000; cursor: pointer; font-size: 1.2rem;
        }
        
        /* 2. ë°”í…€ ì‹œíŠ¸ (ëª¨ë°”ì¼ë§Œ ë³´ì„) */
        .dl-sheet-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 2001;
            opacity: 0; visibility: hidden; transition: 0.3s;
        }
        .dl-sheet-overlay.active { opacity: 1; visibility: visible; }

        .dl-bottom-sheet {
            position: fixed; bottom: -100%; left: 0; width: 100%;
            background: #fff;
            border-top-left-radius: 20px; border-top-right-radius: 20px;
            padding: 25px 20px 40px 20px; z-index: 2002;
            transition: bottom 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            max-height: 80vh; display: flex; flex-direction: column;
        }
        .dl-bottom-sheet.active { bottom: 0; }

        /* --- ğŸ–¥ï¸ ë°˜ì‘í˜• ì²˜ë¦¬ (Media Query) --- */
        
        /* ê¸°ë³¸(PC): ì‚¬ì´ë“œë°” ë³´ì„, FAB ìˆ¨ê¹€ */
        .dl-sidebar { display: block; width: 250px; flex-shrink: 0; }
        .dl-main { flex: 1; }
        .dl-container { display: flex; gap: 30px; max-width: 1200px; margin: 0 auto; }

        /* ëª¨ë°”ì¼ (768px ì´í•˜) */
        @media screen and (max-width: 768px) {
            /* ì‚¬ì´ë“œë°” ìˆ¨ê¸°ê¸° */
            .dl-sidebar { display: none !important; }
            /* ì»¨í…Œì´ë„ˆë¥¼ ì„¸ë¡œ ë°°ì¹˜ë¡œ */
            .dl-container { display: block; }
            /* FAB ë²„íŠ¼ ë³´ì´ê¸° */
            .dl-fab-btn { display: flex !important; }
        }
</style>


    <div id="lock-gate">
        <h2 style="font-family: 'Noto Serif KR'; color: #E87A90; font-size: 2rem; margin-bottom:10px;">Secret Archive</h2>
        <p style="color: #888; margin-bottom: 20px; font-size: 0.9rem;">
            ë¹„ë°€ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.
        </p>
        <input type="password" id="user-pass" class="lock-input" placeholder="Password">
        <button onclick="unlock()" class="lock-btn">Enter</button>
        <p id="error-msg" style="color: #E87A90; font-size: 0.8rem; margin-top: 15px; display: none;">
            â›” ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.
        </p>
    </div>


<div id="secret-content" style="display: none; margin-top: 40px;">
    <div style="text-align:center; margin-bottom: 50px; border-bottom: 1px solid #eee; padding-bottom: 30px;">
        <h1 style="font-family: 'Noto Serif KR'; font-size: 2.5rem; color: #111; margin-bottom: 10px;">SECRET ARCHIVE</h1>
        <p style="color: #888; font-style: italic;">Douglas x Adeline : Unspoken Stories (R-18)</p>
    </div>
    <div class="dl-container">
        <aside class="dl-sidebar">
            <div class="dl-menu-box">
                <div class="dl-menu-title">ğŸ·ï¸ íƒœê·¸ í•„í„° (ì¤‘ë³µ ì„ íƒ ê°€ëŠ¥)</div>
                <div id="tag-filter-container" style="padding: 15px;">
                    </div>
                <div style="text-align: center; padding-bottom: 15px;">
                    <button onclick="resetFilters()" style="font-size: 0.8rem; color: #888; background:none; border:none; cursor:pointer; text-decoration: underline;">
                        â†º í•„í„° ì´ˆê¸°í™”
                    </button>
                </div>
            </div>
            </aside>
        <main class="dl-main">
            <div class="dl-section-header">
                <h2 class="dl-section-title">ğŸ“¦ ì‘í’ˆ ëª©ë¡</h2>
                <span class="dl-section-more" id="item-count">Calculating...</span>
            </div>
            <div class="dl-grid" id="post-grid">
                {% for post in site.posts %}
                    {% if post.type == 'Secret' %}
                    <a href="{{ post.url | relative_url }}" class="dl-card" 
                       data-tags="{{ post.tags | join: ',' }}">
                        <div class="dl-thumb">
                            <span class="dl-badge">R-18</span>
                            {% if post.image %}
                                <img src="{{ '/assets/thumbnails/' | append: post.image | relative_url }}" alt="{{ post.title }}">
                            {% else %}
                                <div style="width:100%; height:100%; background:#eee; display:flex; align-items:center; justify-content:center; color:#ccc;">No Image</div>
                            {% endif %}
                        </div>
                        <div class="dl-info">
                            <h3 class="dl-title">{{ post.title }}</h3>
                            <div class="dl-tags">
                                {% for tag in post.tags %}
                                    <span class="dl-tag">#{{ tag }}</span>
                                {% endfor %}
                            </div>
                            <div class="dl-footer">
                                <span class="dl-price">{{ post.date | date: "%Y.%m.%d" }}</span>
                                <span class="dl-btn">ì—´ëŒ</span>
                            </div>
                        </div>
                    </a>
                    {% endif %}
                {% endfor %}
                <div id="no-result-msg" style="display:none; grid-column: 1 / -1; text-align: center; padding: 50px; color: #888;">
                    ì¡°ê±´ì— ë§ëŠ” ì‘í’ˆì´ ì—†ìŠµë‹ˆë‹¤. ğŸ˜¢
                </div>
            </div>
        </main>
    </div>
</div>

    <div class="dl-fab-btn" onclick="toggleSheet()">
        <i class="fas fa-filter"></i>
    </div>

    <div class="dl-sheet-overlay" id="sheetOverlay" onclick="toggleSheet()"></div>
    <div class="dl-bottom-sheet" id="tagSheet">
        <div style="display:flex; justify-content:space-between; margin-bottom:15px; border-bottom:1px solid #eee; padding-bottom:10px;">
            <span style="font-weight:bold; font-size:1.1rem;">íƒœê·¸ ê²€ìƒ‰</span>
            <span onclick="toggleSheet()" style="cursor:pointer; font-size:1.2rem;"><i class="fas fa-times"></i></span>
        </div>
        
        <div id="mobile-tag-container" style="overflow-y:auto; flex:1;">
            </div>

        <div style="margin-top:15px; text-align:center;">
             <button onclick="resetFilters(); toggleSheet();" style="width:100%; padding:12px; background:#f5f5f5; border:none; border-radius:10px; font-weight:bold; color:#555;">
                í•„í„° ì´ˆê¸°í™”
            </button>
        </div>
    </div>

<script>
    // === [0] í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ê²€ì‚¬ ===
    document.addEventListener("DOMContentLoaded", function() {
        // ë¸Œë¼ìš°ì €ì— 'ì¸ì¦ ë„ì¥(secret_unlocked)'ì´ ìˆëŠ”ì§€ í™•ì¸
        if (localStorage.getItem("secret_unlocked") === "true") {
            grantAccess(); // ë„ì¥ ìˆìœ¼ë©´ ë°”ë¡œ í†µê³¼!
        }
    });


    // === [1] ë¹„ë°€ë²ˆí˜¸ í™•ì¸ í•¨ìˆ˜ ===
    function unlock() {
        var password = "201107"; // ğŸ”‘ ë¹„ë°€ë²ˆí˜¸
        var input = document.getElementById("user-pass").value;
        
        if (input === password) {
            // ì •ë‹µì´ë©´ 'ì¸ì¦ ë„ì¥'ì„ ë¸Œë¼ìš°ì €ì— ì €ì¥ (ì˜êµ¬ ë³´ê´€)
            localStorage.setItem("secret_unlocked", "true");
            grantAccess();
        } else {
            document.getElementById("error-msg").style.display = "block";
            // í‹€ë ¸ì„ ë•Œ ì…ë ¥ì°½ í”ë“¤ê¸° (ì„ íƒì‚¬í•­)
            var passInput = document.getElementById("user-pass");
            passInput.style.borderColor = "red";
            setTimeout(() => { passInput.style.borderColor = "#ccc"; }, 500);
        }
    }
    
    // ì—”í„°í‚¤ ì§€ì›
    document.getElementById("user-pass").addEventListener("keypress", function(event) {
        if (event.key === "Enter") { event.preventDefault(); unlock(); }
    });


    // === [2] ë¬¸ ì—´ì–´ì£¼ëŠ” í•¨ìˆ˜ (ê³µí†µ) ===
    function grantAccess() {
        document.getElementById("lock-gate").style.display = "none";
        document.getElementById("secret-content").style.display = "block";
        
        // ğŸ”“ ì ê¸ˆ í’€ë¦¬ë©´ í•„í„° ì‹œìŠ¤í…œ ê°€ë™! (ì´ê±° ì¤‘ìš”)
        initTagSystem(); 
    }

    // === [B] íƒœê·¸ í•„í„°ë§ ì‹œìŠ¤í…œ (PC & ëª¨ë°”ì¼ í†µí•©) ===
    let selectedTags = new Set();

    function initTagSystem() {
        const cards = document.querySelectorAll('.dl-card');
        const pcContainer = document.getElementById('pc-tag-container');
        const mobileContainer = document.getElementById('mobile-tag-container');

        // ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€
        if (pcContainer.children.length > 0) return;

        // 1. íƒœê·¸ ìˆ˜ì§‘
        let allTags = new Set();
        let totalCount = 0;
        cards.forEach(card => {
            totalCount++;
            if(card.dataset.tags) {
                card.dataset.tags.split(',').forEach(tag => {
                    if(tag.trim()) allTags.add(tag.trim());
                });
            }
        });
        document.getElementById('item-count').innerText = `Total ${totalCount} Items`;

        // 2. íƒœê·¸ ë²„íŠ¼ ìƒì„± (PCì™€ ëª¨ë°”ì¼ ì–‘ìª½ì— ë‹¤ ë„£ì–´ì¤Œ!)
        const sortedTags = Array.from(allTags).sort();
        
        sortedTags.forEach(tag => {
            // PCìš© ë²„íŠ¼ ë§Œë“¤ê¸°
            const btnPC = createTagBtn(tag);
            pcContainer.appendChild(btnPC);

            // ëª¨ë°”ì¼ìš© ë²„íŠ¼ ë§Œë“¤ê¸° (ë˜‘ê°™ì´)
            const btnMobile = createTagBtn(tag);
            mobileContainer.appendChild(btnMobile);
        });
    }

    // ë²„íŠ¼ HTML ìƒì„± í—¬í¼ í•¨ìˆ˜
    function createTagBtn(tag) {
        const btn = document.createElement('span');
        btn.className = 'filter-btn';
        btn.dataset.tag = tag; // íƒœê·¸ëª… ì €ì¥
        btn.innerText = '#' + tag;
        btn.onclick = () => toggleTag(tag);
        return btn;
    }

    // íƒœê·¸ í´ë¦­ ì‹œ (PC/ëª¨ë°”ì¼ ë²„íŠ¼ ëª¨ë‘ ë™ê¸°í™”)
    function toggleTag(tag) {
        // 1. ì„ íƒ ìƒíƒœ ë³€ê²½
        if (selectedTags.has(tag)) {
            selectedTags.delete(tag);
        } else {
            selectedTags.add(tag);
        }

        // 2. ë²„íŠ¼ ë””ìì¸ ì—…ë°ì´íŠ¸ (PC, ëª¨ë°”ì¼ ì‹¹ ë‹¤ ì°¾ì•„ì„œ ë°”ê¿ˆ)
        document.querySelectorAll(`.filter-btn[data-tag="${tag}"]`).forEach(btn => {
            if (selectedTags.has(tag)) btn.classList.add('active');
            else btn.classList.remove('active');
        });

        // 3. í•„í„°ë§ ì ìš©
        applyFilter();
    }


    // í•„í„° ì ìš© (êµì§‘í•©)
    function applyFilter() {
        const cards = document.querySelectorAll('.dl-card');
        let visibleCount = 0;

        cards.forEach(card => {
            const cardTags = card.dataset.tags ? card.dataset.tags.split(',') : [];
            const isMatch = Array.from(selectedTags).every(selected => cardTags.includes(selected));

            if (isMatch) {
                card.style.display = "flex";
                visibleCount++;
            } else {
                card.style.display = "none";
            }
        });

        const noResult = document.getElementById('no-result-msg');
        if (noResult) {
            noResult.style.display = (visibleCount === 0) ? "block" : "none";
        }
        updateCount();
    }


    // í•„í„° ì´ˆê¸°í™”
    function resetFilters() {
        selectedTags.clear();
        document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
        applyFilter();
    }

    // ì•„ì´í…œ ê°œìˆ˜ ì—…ë°ì´íŠ¸
    function updateCount() {
        let realCount = 0;
        document.querySelectorAll('.dl-card').forEach(c => {
            if(c.style.display !== 'none') realCount++;
        });
        const countDisplay = document.getElementById('item-count');
        if(countDisplay) countDisplay.innerText = "Total " + realCount + " Items";
    }

    // === [C] ëª¨ë°”ì¼ ë°”í…€ ì‹œíŠ¸ í† ê¸€ ===
    function toggleSheet() {
        const sheet = document.getElementById('tagSheet');
        const overlay = document.getElementById('sheetOverlay');
        sheet.classList.toggle('active');
        overlay.classList.toggle('active');
    }
</script>
